import{r as s,j as t,u as A,L as T}from"./index-C712Er-D.js";import{i as E}from"./axios-B4nUieVl.js";import{M as I,i as W,u as M,P as z,a as O,b as F,L as _,m as D}from"./proxy-BN5PbcPN.js";class H extends s.Component{getSnapshotBeforeUpdate(c){const n=this.props.childRef.current;if(n&&c.isPresent&&!this.props.isPresent){const o=n.offsetParent,p=W(o)&&o.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=p-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function U({children:a,isPresent:c,anchorX:n}){const o=s.useId(),p=s.useRef(null),i=s.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=s.useContext(I);return s.useInsertionEffect(()=>{const{width:e,height:r,top:x,left:l,right:f}=i.current;if(c||!p.current||!e||!r)return;const m=n==="left"?`left: ${l}`:`right: ${f}`;p.current.dataset.motionPopId=o;const u=document.createElement("style");return h&&(u.nonce=h),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${r}px !important;
            ${m}px !important;
            top: ${x}px !important;
          }
        `),()=>{document.head.contains(u)&&document.head.removeChild(u)}},[c]),t.jsx(H,{isPresent:c,childRef:p,sizeRef:i,children:s.cloneElement(a,{ref:p})})}const K=({children:a,initial:c,isPresent:n,onExitComplete:o,custom:p,presenceAffectsLayout:i,mode:h,anchorX:e})=>{const r=M(q),x=s.useId();let l=!0,f=s.useMemo(()=>(l=!1,{id:x,initial:c,isPresent:n,custom:p,onExitComplete:m=>{r.set(m,!0);for(const u of r.values())if(!u)return;o&&o()},register:m=>(r.set(m,!1),()=>r.delete(m))}),[n,r,o]);return i&&l&&(f={...f}),s.useMemo(()=>{r.forEach((m,u)=>r.set(u,!1))},[n]),s.useEffect(()=>{!n&&!r.size&&o&&o()},[n]),h==="popLayout"&&(a=t.jsx(U,{isPresent:n,anchorX:e,children:a})),t.jsx(z.Provider,{value:f,children:a})};function q(){return new Map}const j=a=>a.key||"";function k(a){const c=[];return s.Children.forEach(a,n=>{s.isValidElement(n)&&c.push(n)}),c}const B=({children:a,custom:c,initial:n=!0,onExitComplete:o,presenceAffectsLayout:p=!0,mode:i="sync",propagate:h=!1,anchorX:e="left"})=>{const[r,x]=O(h),l=s.useMemo(()=>k(a),[a]),f=h&&!r?[]:l.map(j),m=s.useRef(!0),u=s.useRef(l),w=M(()=>new Map),[$,R]=s.useState(l),[y,P]=s.useState(l);F(()=>{m.current=!1,u.current=l;for(let g=0;g<y.length;g++){const d=j(y[g]);f.includes(d)?w.delete(d):w.get(d)!==!0&&w.set(d,!1)}},[y,f.length,f.join("-")]);const C=[];if(l!==$){let g=[...l];for(let d=0;d<y.length;d++){const b=y[d],N=j(b);f.includes(N)||(g.splice(d,0,b),C.push(b))}return i==="wait"&&C.length&&(g=C),P(k(g)),R(l),null}const{forceRender:v}=s.useContext(_);return t.jsx(t.Fragment,{children:y.map(g=>{const d=j(g),b=h&&!r?!1:l===y||f.includes(d),N=()=>{if(w.has(d))w.set(d,!0);else return;let S=!0;w.forEach(L=>{L||(S=!1)}),S&&(v==null||v(),P(u.current),h&&(x==null||x()),o&&o())};return t.jsx(K,{isPresent:b,initial:!m.current||n?void 0:!1,custom:c,presenceAffectsLayout:p,mode:i,onExitComplete:b?void 0:N,anchorX:e,children:g},d)})})},G={Active:"bg-green-100 text-green-800",Inactive:"bg-red-100 text-red-800"},V=["Type1","Type2","CCS","CHAdeMO"],Y=()=>{const[a,c]=s.useState([]),[n,o]=s.useState({status:"",connectorType:"",minPower:"",maxPower:""}),p=A(),i=async()=>{try{const e=new URLSearchParams;n.status&&e.append("status",n.status),n.connectorType&&e.append("connectorType",n.connectorType),n.minPower&&e.append("powerOutput[$gte]",n.minPower),n.maxPower&&e.append("powerOutput[$lte]",n.maxPower);const r=await E.get(`/stations?${e.toString()}`);c(r.data.data)}catch(e){console.error(e)}},h=async e=>{if(window.confirm("Are you sure you want to delete this station?"))try{await E.delete(`/stations/${e}`),i()}catch(r){console.error(r)}};return s.useEffect(()=>{i()},[n]),t.jsxs("div",{className:"p-4 max-w-7xl mx-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"Charging Stations"}),t.jsx(T,{to:"/stations/add",className:"bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition",children:"+ Add Station"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[t.jsxs("select",{className:"border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition",value:n.status,onChange:e=>o({...n,status:e.target.value}),children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"})]}),t.jsxs("select",{className:"border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition",value:n.connectorType,onChange:e=>o({...n,connectorType:e.target.value}),children:[t.jsx("option",{value:"",children:"All Connectors"}),V.map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx("input",{type:"number",placeholder:"Min Power (kW)",className:"border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition",value:n.minPower,onChange:e=>o({...n,minPower:e.target.value})}),t.jsx("input",{type:"number",placeholder:"Max Power (kW)",className:"border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition",value:n.maxPower,onChange:e=>o({...n,maxPower:e.target.value})})]}),t.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md border border-gray-200",children:t.jsxs("table",{className:"w-full table-auto border-collapse",children:[t.jsx("thead",{className:"bg-gray-100",children:t.jsx("tr",{children:["Name","Location","Status","Power (kW)","Connector","Actions"].map(e=>t.jsx("th",{className:"px-5 py-3 text-left text-gray-600 font-medium tracking-wider",children:e},e))})}),t.jsx("tbody",{children:t.jsx(B,{children:a.length>0?a.map(e=>{var r,x;return t.jsxs(D.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"border-t border-gray-200 hover:bg-gray-50 cursor-pointer",children:[t.jsx("td",{className:"px-5 py-4 whitespace-nowrap",children:e.name}),t.jsxs("td",{className:"px-5 py-4 whitespace-nowrap",children:["(",(r=e.location)==null?void 0:r.latitude.toFixed(4),", ",(x=e.location)==null?void 0:x.longitude.toFixed(4),")"]}),t.jsx("td",{className:"px-5 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-semibold ${G[e.status]||"bg-gray-100 text-gray-600"}`,children:e.status})}),t.jsxs("td",{className:"px-5 py-4 whitespace-nowrap",children:[e.powerOutput," kW"]}),t.jsx("td",{className:"px-5 py-4 whitespace-nowrap",children:e.connectorType}),t.jsxs("td",{className:"px-5 py-4 whitespace-nowrap space-x-2",children:[t.jsx("button",{onClick:()=>p(`/stations/edit/${e._id}`),className:"bg-yellow-400 hover:bg-yellow-500 text-white px-4 py-1 rounded transition",children:"Edit"}),t.jsx("button",{onClick:()=>h(e._id),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-1 rounded transition",children:"Delete"})]})]},e._id)}):t.jsx("tr",{children:t.jsx("td",{colSpan:"6",className:"text-center py-6 text-gray-500",children:"No stations found."})})})})]})})]})};export{Y as default};
